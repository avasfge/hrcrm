<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VeloraCorp — Вакансії</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: Inter, sans-serif; }
  </style>
</head>
<body class="bg-gray-50 text-slate-800">
  <!-- Навбар -->
  <header class="sticky top-0 z-30 border-b border-slate-200/80 bg-white/80 backdrop-blur">
    <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <h1 class="text-lg sm:text-xl font-semibold">VeloraCorp · Вакансії</h1>
      <div class="flex items-center gap-2">
        <input id="search" type="search" placeholder="Пошук…" class="h-10 w-64 rounded-xl border border-slate-200 px-3 text-sm" />
        <select id="sort" class="h-10 rounded-xl border border-slate-200 bg-white px-3 text-sm">
          <option value="newest">Нові → старі</option>
          <option value="salaryDesc">ЗП: високі → низькі</option>
          <option value="salaryAsc">ЗП: низькі → високі</option>
        </select>
      </div>
    </div>
  </header>

  <!-- Контент -->
  <main class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 py-6">
    <div id="vacancyGrid" class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3"></div>
    <div id="emptyState" class="hidden mt-10 text-center text-slate-500">
      Немає вакансій.
    </div>
  </main>

  <!-- Модальне вікно для деталей -->
  <div id="detailModal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/50">
    <div class="bg-white rounded-xl shadow-xl p-6 max-w-lg w-full">
      <h2 id="dRole" class="text-xl font-semibold"></h2>
      <p id="dCompany" class="text-sm text-slate-500"></p>
      <div id="dSalary" class="mt-2 font-semibold text-emerald-600"></div>
      <p id="dDesc" class="mt-3 text-sm"></p>
      <h3 class="mt-4 font-semibold">Запитання кандидату:</h3>
      <ul id="dQs" class="list-disc pl-5 text-sm mt-1 space-y-1"></ul>
      <button id="btnCloseDetail" class="mt-5 rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white">Закрити</button>
    </div>
  </div>

  <script>
  const VAC_URL = 'vacancies.json'; // файл у репозиторії
  let vacancies = [];

  function render(){
    const grid=document.getElementById('vacancyGrid');
    const empty=document.getElementById('emptyState');
    grid.innerHTML='';
    if(vacancies.length===0){empty.classList.remove('hidden');return;} else empty.classList.add('hidden');
    vacancies.forEach(v=>{
      const card=document.createElement('div');
      card.className='rounded-xl border bg-white p-4 shadow flex flex-col';
      let shortDesc = v.desc.length > 120 ? v.desc.substring(0,120) + '…' : v.desc;
      card.innerHTML=`<h3 class="font-semibold text-lg">${v.role}</h3>
        <p class="text-sm text-slate-500">${v.company} · ${v.location||''}</p>
        <div class="mt-2 font-semibold text-emerald-600">$${v.salary}</div>
        <p class="mt-2 text-sm flex-grow">${shortDesc}</p>
        <button class="mt-3 rounded-lg bg-emerald-600 px-3 py-2 text-sm font-semibold text-white">Деталі</button>`;
      card.querySelector('button').addEventListener('click',()=>openDetail(v));
      grid.appendChild(card);
    });
  }

  function openDetail(v){
    document.getElementById('dRole').innerText=v.role;
    document.getElementById('dCompany').innerText=v.company + (v.location?(' · '+v.location):'');
    document.getElementById('dSalary').innerText='$'+v.salary;
    document.getElementById('dDesc').innerText=v.desc;
    const qList=document.getElementById('dQs');
    qList.innerHTML='';
    v.questions.forEach(q=>{
      const li=document.createElement('li');
      li.textContent=q;
      qList.appendChild(li);
    });
    document.getElementById('detailModal').classList.remove('hidden');
  }

  document.getElementById('btnCloseDetail').addEventListener('click',()=>{
    document.getElementById('detailModal').classList.add('hidden');
  });

  async function load(){
    try{
      const res=await fetch(VAC_URL);
      vacancies=await res.json();
      render();
    }catch(e){console.error(e);}
  }
  load();
  </script>
</body>
</html>
